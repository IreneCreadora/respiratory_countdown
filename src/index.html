<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>respiratory-countdown</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./sass/index.scss" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/basiclightbox@5.0.4/dist/basicLightbox.min.css"
    />
    <!-- <script type="module" src="./index.js"></script> -->
  </head>
  <body>
    <!-- Particles Container -->
    <div id="particles-js"></div>

    <header class="header" id="header">
      <img
        src="../assets/images/logo.png"
        alt="purpleDx Logo"
        class="header-logo"
      />
    </header>

    <main class="main-content">
      <div class="number-box" id="box1">
        <p>Worldwide<br />there are</p>
        <span class="number" id="num1">454,000,000</span>
        <p class="subtitle">people living with a respiratory condition</p>
      </div>
      <div class="number-box" id="box2">
        <p>Since the start of CES<br />7th January 10am</p>
        <span class="number" id="num2">380</span>
        <p class="subtitle">people were diagnosed</p>
      </div>
      <div class="number-box" id="box3">
        <p>
          Diagnosis can take<br />months to several years,<br />within this time
        </p>
        <span class="number" id="num3">7</span>
        <p class="subtitle">
          people die as a result of a respiratory condition
        </p>
      </div>
    </main>

    <footer class="footer">
      <button id="startIncrement" class="increment-button">
        Start Increment
      </button>
      <button id="increase24" class="increment-button">
        Increase for 24 hours
      </button>
      <p>* Institute for Health Metrics and Evaluation</p>
    </footer>
    <!-- Include particles.js library -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <!-- Particles Configuration -->
    <script>
      particlesJS('particles-js', {
        particles: {
          number: {
            value: 200, // Reduced number for larger node spacing, like the image
            density: {
              enable: true,
              value_area: 1000, // Increased area to spread out the particles
            },
          },
          color: {
            value: '#939393', // Grey color like in the image
          },
          shape: {
            type: 'circle',
            stroke: {
              width: 0.1,
              color: '#111111',
            },
          },
          opacity: {
            value: 0.7, // Slight opacity
            random: false,
            anim: {
              enable: false,
            },
          },
          size: {
            value: 8, // Larger nodes to match the image
            random: true,
            anim: {
              enable: false,
            },
          },
          line_linked: {
            enable: true,
            distance: 150,
            color: '#939393', // Line color to match the image
            opacity: 0.4,
            width: 3, // Slightly thicker lines
          },
          move: {
            enable: true,
            speed: 2.5, // speed controle
            direction: 'none',
            random: false,
            straight: false,
            out_mode: 'out',
            bounce: false,
            attract: {
              enable: false,
              rotateX: 600,
              rotateY: 1200,
            },
          },
        },
        interactivity: {
          detect_on: 'canvas',
          events: {
            onhover: {
              enable: true,
              mode: 'grab', // Keeps the structure interactive
            },
            onclick: {
              enable: true,
              mode: 'push',
            },
            resize: true,
          },
          modes: {
            grab: {
              distance: 140,
              line_linked: {
                opacity: 0.8,
              },
            },
            bubble: {
              distance: 400,
              size: 40,
              duration: 2,
              opacity: 8,
              speed: 3,
            },
            repulse: {
              distance: 200,
              duration: 0.4,
            },
          },
        },
        retina_detect: true,
      });
    </script>

    <script>
      let initialNum2 = 380.52;
      let initialNum3 = 7.61;
      let intervalId;

      // Helper function to format numbers with commas
      function formatNumber(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      }

      function startIncrement() {
        if (intervalId) return; // Prevent multiple intervals
        intervalId = setInterval(incrementNumbers, 60000); // Increment every minute
      }

      function incrementNumbers() {
        initialNum2 += 380.52;
        initialNum3 += 7.61;

        // Update the displayed numbers with formatted values
        document.getElementById('num2').textContent = formatNumber(
          Math.round(initialNum2)
        );
        document.getElementById('num3').textContent = formatNumber(
          Math.round(initialNum3)
        );
      }

      function updateForHours(hours) {
        // Calculate total increment for the given number of hours
        const totalIncrementNum2 = 380.52 * (hours * 60); // Increment per minute
        const totalIncrementNum3 = 7.61 * (hours * 60); // Increment per minute

        initialNum2 += totalIncrementNum2;
        initialNum3 += totalIncrementNum3;

        // Update the displayed numbers with formatted values
        document.getElementById('num2').textContent = formatNumber(
          Math.round(initialNum2)
        );
        document.getElementById('num3').textContent = formatNumber(
          Math.round(initialNum3)
        );
      }

      // Event listeners for button clicks
      document.getElementById('increase24').addEventListener('click', () => {
        updateForHours(24); // Increase num2 and num3 for 24 hours
      });

      document
        .getElementById('startIncrement')
        .addEventListener('click', startIncrement);
    </script>
  </body>
</html>
